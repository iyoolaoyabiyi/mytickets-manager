{% extends 'base.twig' %}
{% set c = copyTickets %}
{% block content %}
<section class="l-container py-2xl l-stack">
  {% include 'partials/page_header.twig' with {
    title: c.title,
    actions_html: '<a class="c-button c-button--primary" href="/tickets/new">' ~ c.actions.new ~ '</a>'
  } %}

  <section class="c-filters" aria-label="Filters">
    <input id="q" type="search" placeholder="{{ c.filters.searchPlaceholder }}" class="c-filters__search" />
    <div class="l-cluster">
      <label for="status" class="c-field__label">{{ c.filters.status.label }}</label>
      <select id="status" class="c-field__control">
        {% for o in c.filters.status.options %}
          <option>{{ o }}</option>
        {% endfor %}
      </select>
    </div>
  </section>

  <section role="feed" id="tickets-feed" class="l-stack">
    {% if tickets is empty %}
      <div class="c-empty">
        <img class="c-empty__illustration" src="/assets/media/icons/bar-chart.svg" alt="" />
        <p class="c-empty__title">No tickets yet.</p>
        <a class="c-button c-button--primary" href="/tickets/new">Create your first ticket</a>
      </div>
    {% else %}
      {% for t in tickets %}
        <article class="c-ticket-card" role="article">
          <div>
            <h3 class="c-ticket-card__title">{{ t.title }}</h3>
            <p class="c-ticket-card__meta">#{{ t.id }} Â· Updated {{ t.relativeTime }}</p>
          </div>
          <div class="l-cluster">
            <span class="c-tag {% if t.status == 'open' %}c-tag--open{% elseif t.status == 'in_progress' %}c-tag--in-progress{% else %}c-tag--closed{% endif %}">{{ t.status }}</span>
            <div class="c-ticket-card__actions">
              <a class="c-button c-button--secondary" href="/tickets/{{ t.id }}/edit">Edit</a>
              <button class="c-button c-button--danger" data-ticket-id="{{ t.id }}">Delete</button>
            </div>
          </div>
        </article>
      {% endfor %}
    {% endif %}
  </section>
</section>
{% endblock %}
